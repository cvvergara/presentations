<!doctype html>
<html lang="en">

    <head>
        <meta charset="utf-8">

        <title>Shortest Path search in your Database and more with pgRouting</title>

        <meta name="description" content="Shortest Path search in your Database and more with pgRouting">
        <meta name="author" content="Vicky Vergara, Economist">

        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

        <link rel="stylesheet" href="../css/reveal.min.css">
        <link rel="stylesheet" href="../css/theme/white.css" id="theme">

        <!-- For syntax highlighting -->
        <link rel="stylesheet" href="../lib/css/zenburn.css">

        <!-- Printing and PDF exports -->
        <script>
            var link = document.createElement( 'link' );
            link.rel = 'stylesheet';
            link.type = 'text/css';
            link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
            document.getElementsByTagName( 'head' )[0].appendChild( link );
        </script>


        <link rel="stylesheet" href="../css/custom.css">

        <!--[if lt IE 9]>
        <script src="lib/js/html5shiv.js"></script>
        <![endif]-->
    </head>

    <body>

        <div class="reveal">

            <div class="slides">

                <section>
                    <h1 style="text-transform:none;margin-top:40px;font-size:100px;line-height:125px;color:#000000">データベース内の<br>最短経路探索<br>
                    </h1>
                    <h3 class="large-margin" style="margin-top:70px !important;color:#0000FF;text-shadow:none;">とpgroutingなどについて</h3>
                    <p>
                        <small>Presented by <a href="http://blog.georepublic.info">Vicky Vergara</a> </small>
                    </p>
                    <img class="logo" src="../img/georepublicBlack.png" />
                </section>

                <!-- Machado -->
                <section>
                    <h1 style="text-transform:none;margin-top:20px;font-size:50px;line-height:60px">
                    "Al andar se hace camino<br>
                    y al volver la vista atrás<br>
                    se ve la senda que nunca<br>
                    se ha de volver a pisar."<br>
                    </h1>
                    <h2 style="text-transform:none;color:#000000;margin-top:20px;font-size:50px;line-height:60px">
                    君が歩くとそこに道はできる<br>
                    そして後ろを振り返ったとき<br>
                    二度と辿ることはできない道が見えるだろう<br>
                    </h2>
                    <h2 style="font-size:50px">Antonio Machado</h2>
                </section>   <!-- end of Machado -->

                <section>  <!-- Vicky's background -->
                    <section>
                    <h1 style="text-transform:none;margin-top:20px;font-size:50px;line-height:60px">Celia Virginia Vergara Castillo
                    </h1>
                        <ul>
                            <li>経済学者, コンピュータ科学者</li>
                            <li>Georepublic</li>
                            <li> pgRouting 開発者</li>
                            <li>メキシコ人</li>
                            <li>Vickyとして知られています</li>
                        </ul>
                        <br>
                        <p style="color:#0000FF;font-size:50px">FOSS4G をお楽しみください!!!</p>
                        <br>
                        <img class="logo" src="../img/georepublicBlack.png" />
                    </section>
                </section>   <!-- end of Vicky's background -->


                <section>   <!-- pgRouging is open source -->
                    <section>
                        <img style="border:0;background:none;padding-top:80px;padding-bottom:40px;height:250px" src="pgrouting/pgrouting.png" />
                        <h2>pgRouting プロジェクト</h2>
                        <br></br>
                        <img class="logo" src="../img/georepublicBlack.png" />
                    </section>
                    <section>
                        <h2 style="padding-top:40px;padding-bottom:30px;"> オープンソースプロジェクト</h2>
                        <img style="border:0;padding:10px;height:300px" src="pgrouting/postgres.gif" />
                        <img style="border:0;padding:10px;height:300px" src="pgrouting/postgis.png" />
                        <br>
                        <img style="border:0;padding:10px;height:100px" src="pgrouting/boostlogo.jpeg" />
                        <img class="logo" src="../img/georepublicBlack.png" />
                    </section>

                    <section>
                        <h2 style="padding-top:40px;padding-bottom:30px;"> オープンソースプロジェクト</h2>
                        <img style="border:0;padding:10px;height:300px" src="pgrouting/osi.png" />
                        <br></br>
                        <img class="logo" src="../img/georepublicBlack.png" />
                    </section>
                    

                     
                    <section>
                        <!-- TODO translate -->
                        <h2>New Release</h2>
                        <img style="border:0;background:none;padding-top:20px;height:250px" src="tokyoImages/new-2.1-ver-animated.gif" />
                        <img style="border:0;background:none;padding-top:20px;height:250px" src="pgrouting/pgrouting.png" />
                        <h2 style="color:blue;">pgRouting 2.1</h2>
                        <br></br>
                        <img class="logo" src="../img/georepublicBlack.png" />
                    </section>
                    
          
                    <!-- pgRouging 2.1 undirected graph-->
                    <section>
                        <h2>Precise definitions </h2>
                        <br><br><br>
                        For example ....
                        <br><br><br>
                        <img class="logo" src="../img/georepublicBlack.png" />
                    </section>    
                    
                    <section>    
                        <h3>Weighted Undirected Graph</h3>
                        <div style="font-size: 60%;"> <p>
                        <ul>
                            <li>
                                Let $V$ be a set of vertices<br>
                                $V = source \cup target \cup \{start_v\} \cup \{end_v\}$
                            </li>
                            <li>
                                Let $E$ be a set of edges
                                <ul>
                                    <li>when $reverse\_cost = \varnothing$:<br>
                                        $E = \{ (source_i, target_i, cost_i) | cost_i \geq 0 \}$<br>
                                        $\cup \quad \{ (target_i, source_i, cost_i) | cost_i \geq 0 \}$
                                    </li>
                                    <li>when $reverse\_cost \neq \varnothing$:<br>
                                        $E = \{ (source_i, target_i, cost_i) | cost_i \geq0 \}$<br>
                                        $\cup \quad \{ (target_i, source_i, cost_i) | cost_i \geq 0 \}$<br>
                                        $\cup \quad \{ (target_i, source_i, reverse\_cost_i) | reverse\_cost_i \geq 0)\}$<br>
                                        $\cup \quad \{ (source_i, target_i, reverse\_cost_i) | reverse\_cost_i \geq 0)\}$
                                    </li>
                                </ul>
                            </li>
                            <li>$G_u(V,E)$ is a weighted undirected graph</li>
                        </ul>
                        </p></div>
                        <br></br>
                        <img class="logo" src="../img/georepublicBlack.png" />
                    </section>
 
                    <section>
                        <h2>Many algorithms </h2>
                        <br><br><br>
                        For example ....
                        <br><br><br>
                        <img class="logo" src="../img/georepublicBlack.png" />
                    </section>    

                    <section>
                        <!-- TODO translate -->
                        <h2 style="padding-top:10px;padding-bottom:10px;">algorithms</h2>
                        <ul style="font-size:40px">
                        <!-- TODO translate -->
                            <li> Shortest Path Algorithm
                                <ul style="font-size:30px">
                                    <li>Dijkstra</li>
                                    <li>A-Star</li>
                                    <li>Alternative Routes</li>
                                    <li>Turn Restrictions</li>
                                </ul>
                            </li>
                            <li>Traveling Salesperson Algorithm</li>
                            <li>Drivetime Analysis</li>
                            <li>Vehicle Route Problem Solver</li>
                        </ul>
                        <br></br>
                        <img class="logo" src="../img/georepublicBlack.png" />
                    </section>

                    
                    <section>
                        <img class="stretch" src="pgrouting/forkme.png" />
                        <br></br>
                        <img class="logo" src="../img/georepublicBlack.png" />
                    </section>
                </section> <!-- end of pgRouging is open source -->

                
                
                
                <section data-background="pgrouting/image_003.jpg"> <!-- pgRouging is Routing on the data base -->
                    <section>
                        <img style="border:0;background:none;padding-top:30px;padding-bottom:30px;height:200px" src="pgrouting/database.png" />
                        <!-- TODO translate -->
                        <h2>ライブラリは<br>データベース内での<br>ルート検索機能を<br>提供しています</h2>
                        <br>
                        <img class="logo" src="../img/georepublicBlack.png" />
                    </section>


                    <section>
                        <h2>Prepare for Routing </h2>
                        <br>
                        <ul>
                            <li>Create a Database</li>
                            <li>Load data</li>
                        <ul>
                        <br><br><br>
                        <img class="logo" src="../img/georepublicBlack.png" />
                    </section>    



                    <section>
                        <!-- TODO translate -->
                        <h2>Create a Database</h2>
                        <pre><code data-trim class="sql example">
CREATE DATABASE routing;
\c routing
CREATE EXTENSION postgis;
CREATE EXTENSION pgrouting; </code></pre> 
                        <p> <br> <img class="logo" src="../img/georepublicBlack.png" /> <p>
                    </section>

                     <section>
                        <h2>Insert your data</h2>
                        <!-- TODO fix font size to be bigger-->
                        <pre><code class="sh" style="line-height:110%; font-size: 185%;">                        
 BBOX="-122.8,45.4,-122.5,45.6"
 wget --progress=dot:mega  
   \-O "sampledata.osm" 
   \ "http://www.overpass-api.de
   \ /api/xapi?
   \*[bbox=${BBOX}][@meta]"
 osm2pgrouting -d routing 
   \ -f sampledata.osm
                        </code></pre> 
                        <p> <br> <img class="logo" src="../img/georepublicBlack.png" /> <p>
                    </section>

                </section>  <!-- pgRouging is Routing on the data base -->
                
                
                
                
                <section data-background="pgrouting/image_003.jpg">
                    <h2>Let's Route!!!</h2>
                    <br><br><br>
                    <img class="logo" src="../img/georepublicBlack.png" />
                </section>    

                <section data-background="pgrouting/image_003.jpg"> <!-- one to one-->
                    <section style="background-color:#000000;background:rgba(0, 0, 0, 0.85);">
                        <h2 style="padding-top:10px;padding-bottom:5px;">From one Place <br> to one Destination</h2>
                        <img style="border:0;background:none;height:400px" src="tokyoImages/dijkstra1-oneToOne.png" />
                        <br></br>
                        <img class="logo" src="../img/georepublic.png" />
                    </section>

                    <section>
                        <h2>SQL Query</h2>
                        <pre><code data-trim class="sql example"> SELECT * FROM pgr_dijkstra('
      SELECT gid as id,
             source,
             target,
             cost_s as cost,
             reverse_cost_s AS reverse_cost 
        FROM ways',
    61796, 73402, true); </code></pre>
                        <p> <br> <img class="logo" src="../img/georepublicBlack.png" /> <p>
                    </section>

                    <section>
                        <h2>Query Result</h2>
                        <p><pre><code data-trim class="sql" style="line-height:28px; font-size: 120%;">
.seq | path_seq | node  |  edge  |  cost  | agg_cost
-----+----------+-------+--------+--------+---------
   1 |        1 | 61796 |  27230 | 1.7314 |        0
   2 |        2 | 40331 |  27259 | 4.4036 |   1.7314
   3 |        3 | 42625 |  27258 | 2.0006 |   6.1350
  ...
   7 |        9 | 73402 |     -1 |      0 |  19.0029
  </code></pre></p>
                        <p> <br> <img class="logo" src="../img/georepublicBlack.png" /> <p>
                    </section>
                    
                    <section  style="background-color:#000000;background:rgba(0, 0, 0, 0.85);">
                        <h2 style="padding-top:10px;padding-bottom:5px;">From House <br> to Restaurant</h2>
                        <img style="border:0;background:none;height:400px" src="tokyoImages/dijkstra1-oneToOneHouseToRest.gif" />
                        <br></br>
                        <img class="logo" src="../img/georepublic.png" />
                    </section>

                    
                    
                    <section>
                        <h2>SQL Query</h2>
                        <pre><code data-trim class="sql example"> SELECT * FROM pgr_dijkstra('
      SELECT gid as id,
             source, target,
             cost_s as cost,
             reverse_cost_s AS reverse_cost 
        FROM ways',
    73402, 61796);  </code></pre>
                    <br> <img class="logo" src="../img/georepublicBlack.png" /> <p>
                    </section>
                    
                    <section  style="background-color:#000000;background:rgba(0, 0, 0, 0.85);">
                        <h2 style="padding-top:10px;padding-bottom:5px;">From Restaurant <br> to House</h2>
                        <img style="border:0;background:none;height:400px" src="tokyoImages/dijkstra1-oneToOneRestToHouse.gif" />
                        <br></br>
                        <img class="logo" src="../img/georepublic.png" />
                    </section>
                </section>  <!-- one to one -->
              
              
              
                <section data-background="pgrouting/image_003.jpg"> <!-- many to one-->
                    <section  style="background-color:#000000;background:rgba(0, 0, 0, 0.85);">
                        <h2 style="padding-top:10px;padding-bottom:5px;">From many houses <br> to one Restaurant</h2>
                        <img style="border:0;background:none;height:400px" src="tokyoImages/dijkstra2-manyToOneHousesToRest.gif" />
                        <br></br>
                        <img class="logo" src="../img/georepublic.png" />
                    </section>
                    <section>
                        <h2>SQL Query</h2>
                        <pre><code data-trim class="sql example"> SELECT * FROM pgr_dijkstra('
    SELECT gid as id,
             source, target,
             cost_s as cost,
             reverse_cost_s AS reverse_cost 
         FROM ways',
    ARRAY[61796, 47568], 73402); </code></pre>
                        <p> <br> <img class="logo" src="../img/georepublicBlack.png" /> <p>
                    </section>
                </section>  <!-- one to many -->
                
                
                
                <section data-background="pgrouting/image_003.jpg"> <!-- one to many-->
                    <section  style="background-color:#000000;background:rgba(0, 0, 0, 0.85);">
                        <h2 style="padding-top:10px;padding-bottom:5px;">From one Restaurant <br> to many houses</h2>
                        <img style="border:0;background:none;height:400px" src="tokyoImages/dijkstra3-oneToManyRestToHouses.gif" />
                        <br></br>
                        <img class="logo" src="../img/georepublic.png" />
                    </section>
                    <section>
                        <h2>SQL Query</h2>
                        <pre><code data-trim class="sql example"> SELECT * FROM pgr_dijkstra('
    SELECT gid as id,
             source, target,
             cost_s as cost,
             reverse_cost_s AS reverse_cost 
        FROM ways',
    73402, ARRAY[ 61796, 47568], true); </code></pre>
                        <p> <br> <img class="logo" src="../img/georepublicBlack.png" /> <p>
                    </section>
                </section>  <!-- one to many -->

                
                
                <section data-background="pgrouting/image_003.jpg"> <!-- many to many-->
                    <section  style="background-color:#000000;background:rgba(0, 0, 0, 0.85);">
                        <h2 style="padding-top:10px;padding-bottom:5px;">From many to many  <br> 家 ~ レストラン</h2>
                        <img style="border:0;background:none;height:400px" src="tokyoImages/dijkstra4-manyToManyHousesToRests.gif" />
                        <br></br>
                        <img class="logo" src="../img/georepublic.png" />
                    </section>
                    <section>
                        <h2>SQL Query</h2>
                        <pre><code data-trim class="sql example"> SELECT * FROM pgr_dijkstra('
  SELECT gid AS id,
         source, target,
             cost_s as cost,
             reverse_cost_s AS reverse_cost 
        FROM ways',
  ARRAY[61796, 47568], ARRAY[73402, 51647]); </code></pre>
                        <p> <br> <img class="logo" src="../img/georepublicBlack.png" /> <p>
                    </section>

                    <section>
                        <h2>Query Result</h2>
                        <p><pre><code data-trim class="sql" style="line-height:28px; font-size: 120%;">
|   Column  |     Content                     |
|-----------|---------------------------------|
| seq       | Sequencial number               |
| path_seq  | Sequencial number for each path |
| start_vid | Start vertex of the path        |
| end_vid   | End vertex of the path          |
| node      | Node identifier                 |
| edge      | Edge identifier                 |
| cost      | Cost of the edge                |
| agg_cost  | Cost of the path up to the node |
                         </code></pre>
                        <p> <br> <img class="logo" src="../img/georepublicBlack.png" /> <p>
                    </section>
                </section>  <!-- many to many -->
                
   

                <section data-background="pgrouting/image_003.jpg">  <!-- pgRouging minimize costs -->
                    <section>
                        <img style="border:0;background:none;padding-top:80px;padding-bottom:10px;height:250px" src="pgrouting/prague-clock.jpg" />
                        <img style="border:0;background:none;padding-top:80px;padding-bottom:10px;height:250px" src="pgrouting/costs.png" />
                        <h2>Costs</h2>
                        <img class="logo" src="../img/georepublicBlack.png" />
                    </section>

                    <section>
                        <img class="stretch" src="pgrouting/costvirt.png" />
                    </section>

                    <section>
                        <img class="stretch" src="pgrouting/slope.png" />
                    </section>

                    <section>
                        <img class="stretch" src="pgrouting/conditions.png" />
                    </section>

                    <section>
                        <img class="stretch" src="pgrouting/road.jpg" />
                    </section>

                    <section>
                        <img class="stretch" src="pgrouting/trails.png" />
                    </section>

                </section>  <!-- pgRouging minimize costs -->




                                
                
                <section data-background="pgrouting/image_003.jpg">
                    <section>
                        <h2> pgr_dijkstra </h2> <h3> on undirected graph </h3>
                        <h4> With reverse cost </h4>
                        <p><pre><code class="sql"  data-trim contenteditable >
SELECT * FROM pgr_Dijkstra(
  'SELECT id, source, target, cost, reverse_cost FROM edges',
  3,  5,
  false);
			</code></pre></p>
                        <h4> Without reverse cost </h4>
                        <p><pre><code class="sql"  data-trim contenteditable >
SELECT * FROM pgr_Dijkstra(
  'SELECT id, source, target, cost FROM edges',
  3, 5,
  false);
			</code></pre></p>
                        <br></br>
                        <img class="logo" src="../img/georepublicBlack.png" />
                    </section>
                    <section>
                        <h2> pgr_dijkstra </h2> <h3> directed graph </h3>
                        <h4> With reverse cost </h4>
                        <p><pre><code class="sql"  data-trim contenteditable >
SELECT * FROM pgr_Dijkstra(
  'SELECT id, source, target, cost, reverse_cost FROM edges',
  3, 5,
  true);
                        </code></pre></p>
                        <h4> Without reverse cost </h4>
                        <p><pre><code class="sql"  data-trim contenteditable >
SELECT * FROM pgr_Dijkstra(
  'SELECT id, source, target, cost FROM edges',
  3, 5,
  true);
                        </code></pre></p>
                        <br></br>
                        <img class="logo" src="../img/georepublicBlack.png" />
                    </section>
                </section>

                
               <!-- Machado -->
                <section>
                    <h1 style="text-transform:none;margin-top:20px;font-size:50px;line-height:60px">
                    "Al andar se hace camino<br>
                    y al volver la vista atrás<br>
                    se ve la senda que nunca<br>
                    se ha de volver a pisar."<br>
                    </h1>
                    <h2 style="text-transform:none;color:#000000;margin-top:20px;font-size:50px;line-height:60px">
                    君が歩くとそこに道はできる<br>
                    そして後ろを振り返ったとき<br>
                    二度と辿ることはできない道が見えるだろう<br>
                    </h2>
                    <h2 style="font-size:50px">Antonio Machado</h2>
                </section>   <!-- end of Machado -->

                
                <section>
                    <h2 style="padding-top:80px;">Interested in pgRouting?</h2>
                    <ul style="padding-top:40px;">
                        <li>pgRouting: <a href="http://pgrouting.org">http://pgrouting.org</a></li>
                        <li>Email: <a href="mailto:vicky@georepublic.de">vicky@georepublic.de</a></li>
                        <li>Website: <a href="http://georepublic.info">http://georepublic.info</a></li>                        
                    </ul> 
                    </p>
                    <br></br>
                    <img class="logo" src="../img/georepublicBlack.png" />
                </section>

            </div>

        </div>

        <script src="../lib/js/head.min.js"></script>
        <script src="../js/reveal.min.js"></script>

        <script>

            // Full list of configuration options available at:
            // https://github.com/hakimel/reveal.js#configuration
            Reveal.initialize({
                controls: true,
                progress: true,
                history: true,
                center: true,

                transition: 'convex', // none/fade/slide/convex/concave/zoom
		math: {
			// mathjax: 'http://cdn.mathjax.org/mathjax/latest/MathJax.js',
			config: 'TeX-AMS_HTML-full'
		},

                // Optional reveal.js plugins
                dependencies: [
                    { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
                    { src: '../plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: '../plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: '../plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
                    { src: '../plugin/zoom-js/zoom.js', async: true },
                    { src: '../plugin/notes/notes.js', async: true },
                    { src: '../plugin/math/math.js', async: true }
                ]
            });

        </script>

    </body>
</html>
